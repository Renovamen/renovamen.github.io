<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.png" type="image/png"><link rel="icon" href="/favicon.svg" type="image/svg+xml"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><meta name="msapplication-TileColor" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><script type="module" async="" crossorigin="" src="/assets/app-b8d27c96.js"></script><style>.prompt[data-v-4d808a77]{vertical-align:-.2em;font-size:.85em}.blink[data-v-4d808a77]{animation:blinker-4d808a77 1s none infinite}@keyframes blinker-4d808a77{50%{opacity:0}}*,:after,:before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}body{margin:0;line-height:inherit}h1,h2,h3,h4{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}code,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}button{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button{text-transform:none}button{-webkit-appearance:button;background-color:transparent;background-image:none}h1,h2,h3,h4,p,pre{margin:0}ul{list-style:none;margin:0;padding:0}button{cursor:pointer}*,:after,:before{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-scroll-snap-strictness:proximity;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow:0 0 rgba(0,0,0,0);--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,.5)}@font-face{font-family:DM Sans;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/dmsans/v11/rP2Hp2ywxg089UriCZ2IHSeH.woff2) format("woff2");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:DM Sans;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/dmsans/v11/rP2Hp2ywxg089UriCZOIHQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:DM Sans;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/dmsans/v11/rP2Cp2ywxg089UriASitCBamC2QX.woff2) format("woff2");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:DM Sans;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/dmsans/v11/rP2Cp2ywxg089UriASitCBimCw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[i-fa6-solid\:angle-right=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 256 512' display='inline-block' vertical-align='sub' width='1.2em' height='1.2em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M246.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256L41.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z'/%3E%3C/svg%3E");-webkit-mask:var(--un-icon) no-repeat;mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;background-color:currentColor;color:inherit;display:inline-block;vertical-align:sub;width:1.2em;height:1.2em}[i-ic\:round-update=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 24 24' display='inline-block' vertical-align='sub' width='1.2em' height='1.2em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M11 8.75v3.68c0 .35.19.68.49.86l3.12 1.85c.36.21.82.09 1.03-.26c.21-.36.1-.82-.26-1.03l-2.87-1.71v-3.4c-.01-.4-.35-.74-.76-.74s-.75.34-.75.75zm10 .75V4.21c0-.45-.54-.67-.85-.35l-1.78 1.78a9.01 9.01 0 0 0-7.21-2.6c-4.19.38-7.64 3.75-8.1 7.94a9 9 0 0 0 17.87 2.14c.07-.6-.4-1.12-1-1.12c-.5 0-.92.37-.98.86c-.43 3.49-3.44 6.19-7.05 6.14c-3.71-.05-6.84-3.18-6.9-6.9C4.94 8.2 8.11 5 12 5c1.93 0 3.68.79 4.95 2.05l-2.09 2.09c-.32.32-.1.86.35.86h5.29c.28 0 .5-.22.5-.5z'/%3E%3C/svg%3E");-webkit-mask:var(--un-icon) no-repeat;mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;background-color:currentColor;color:inherit;display:inline-block;vertical-align:sub;width:1.2em;height:1.2em}[i-jam\:rss-feed=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='-4 -4 24 24' display='inline-block' vertical-align='sub' width='1.2em' height='1.2em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M1.996 15.97a1.996 1.996 0 1 1 0-3.992a1.996 1.996 0 0 1 0 3.992zM1.12 7.977a.998.998 0 0 1-.247-1.98a8.103 8.103 0 0 1 9.108 8.04v.935a.998.998 0 1 1-1.996 0v-.934a6.108 6.108 0 0 0-6.865-6.06zM0 1.065A.998.998 0 0 1 .93.002C8.717-.517 15.448 5.374 15.967 13.16c.042.626.042 1.254 0 1.88a.998.998 0 1 1-1.992-.133c.036-.538.036-1.077 0-1.614C13.53 6.607 7.75 1.548 1.065 1.994A.998.998 0 0 1 0 1.064z'/%3E%3C/svg%3E");-webkit-mask:var(--un-icon) no-repeat;mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;background-color:currentColor;color:inherit;display:inline-block;vertical-align:sub;width:1.2em;height:1.2em}[i-majesticons\:pencil-line=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 24 24' display='inline-block' vertical-align='sub' width='1.2em' height='1.2em' xmlns='http://www.w3.org/2000/svg' %3E%3Cg fill='currentColor'%3E%3Cpath d='M15.586 3a2 2 0 0 1 2.828 0L21 5.586a2 2 0 0 1 0 2.828l-12 12A2 2 0 0 1 7.586 21H5a2 2 0 0 1-2-2v-2.586A2 2 0 0 1 3.586 15l12-12zm-.172 3L18 8.586L19.586 7L17 4.414L15.414 6zm1.172 4L14 7.414l-9 9V19h2.586l9-9z'/%3E%3C/g%3E%3C/svg%3E");-webkit-mask:var(--un-icon) no-repeat;mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;background-color:currentColor;color:inherit;display:inline-block;vertical-align:sub;width:1.2em;height:1.2em}[i-ph\:rocket-launch-duotone=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 256 256' display='inline-block' vertical-align='sub' width='1.2em' height='1.2em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M94.1 184.6c-11.4 33.9-56.6 33.9-56.6 33.9s0-45.2 33.9-56.6Zm90.5-67.9v64.6a8 8 0 0 1-2.4 5.6l-32.3 32.4a8 8 0 0 1-13.5-4.1l-8.4-41.9Zm-45.3-45.3H74.7a8 8 0 0 0-5.6 2.4l-32.4 32.3a8 8 0 0 0 4.1 13.5l41.9 8.4Z' opacity='.2'/%3E%3Cpath fill='currentColor' d='M96.6 177a7.9 7.9 0 0 0-10.1 5c-6.6 19.7-27.9 25.8-40.2 27.7c1.9-12.3 8-33.6 27.7-40.2a8 8 0 1 0-5.1-15.1c-16.4 5.4-28.4 18.4-34.8 37.5a91.8 91.8 0 0 0-4.6 26.6a8 8 0 0 0 8 8a91.8 91.8 0 0 0 26.6-4.6c19.1-6.4 32.1-18.4 37.5-34.8a7.9 7.9 0 0 0-5-10.1Z'/%3E%3Cpath fill='currentColor' d='M227.6 41.8a15.7 15.7 0 0 0-13.4-13.4c-11.3-1.7-40.6-2.5-69.2 26.1l-9 8.9H74.7a16.2 16.2 0 0 0-11.3 4.7l-32.3 32.4a15.9 15.9 0 0 0-4 15.9a16 16 0 0 0 12.2 11.1l39.5 7.9l41.8 41.8l7.9 39.5a16 16 0 0 0 11.1 12.2a14.7 14.7 0 0 0 4.6.7a15.6 15.6 0 0 0 11.3-4.7l32.4-32.3a16.2 16.2 0 0 0 4.7-11.3V120l8.9-9c28.6-28.6 27.8-57.9 26.1-69.2ZM74.7 79.4H120l-39.9 39.9l-37.7-7.5Zm81.6-13.6c7.8-7.8 28.8-25.6 55.5-21.6c4 26.7-13.8 47.7-21.6 55.5L128 161.9L94.1 128Zm20.3 115.5l-32.4 32.3l-7.5-37.7l39.9-39.9Z'/%3E%3C/svg%3E");-webkit-mask:var(--un-icon) no-repeat;mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;background-color:currentColor;color:inherit;display:inline-block;vertical-align:sub;width:1.2em;height:1.2em}[i-tabler\:edit=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 24 24' display='inline-block' vertical-align='sub' width='1.2em' height='1.2em' xmlns='http://www.w3.org/2000/svg' %3E%3Cg fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'%3E%3Cpath d='M7 7H6a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-1'/%3E%3Cpath d='M20.385 6.585a2.1 2.1 0 0 0-2.97-2.97L9 12v3h3l8.385-8.415zM16 5l3 3'/%3E%3C/g%3E%3C/svg%3E");-webkit-mask:var(--un-icon) no-repeat;mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;background-color:currentColor;color:inherit;display:inline-block;vertical-align:sub;width:1.2em;height:1.2em}[i-uil\:tag-alt=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 24 24' display='inline-block' vertical-align='sub' width='1.2em' height='1.2em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M7.5 6A1.5 1.5 0 1 0 9 7.5A1.5 1.5 0 0 0 7.5 6Zm13.62 4.71l-8.41-8.42A1 1 0 0 0 12 2H3a1 1 0 0 0-1 1v9a1 1 0 0 0 .29.71l8.42 8.41a3 3 0 0 0 4.24 0L21.12 15a3 3 0 0 0 0-4.24Zm-1.41 2.82l-6.18 6.17a1 1 0 0 1-1.41 0L4 11.59V4h7.59l8.12 8.12a1 1 0 0 1 .29.71a1 1 0 0 1-.29.7Z'/%3E%3C/svg%3E");-webkit-mask:var(--un-icon) no-repeat;mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;background-color:currentColor;color:inherit;display:inline-block;vertical-align:sub;width:1.2em;height:1.2em}[i~=carbon-sun]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 32 32' display='inline-block' vertical-align='sub' width='1.2em' height='1.2em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6ZM5.394 6.813L6.81 5.399l3.505 3.506L8.9 10.319zM2 15.005h5v2H2zm3.394 10.193L8.9 21.692l1.414 1.414l-3.505 3.506zM15 25.005h2v5h-2zm6.687-1.9l1.414-1.414l3.506 3.506l-1.414 1.414zm3.313-8.1h5v2h-5zm-3.313-6.101l3.506-3.506l1.414 1.414l-3.506 3.506zM15 2.005h2v5h-2z'/%3E%3C/svg%3E");-webkit-mask:var(--un-icon) no-repeat;mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;mask-size:100% 100%;background-color:currentColor;color:inherit;display:inline-block;vertical-align:sub;width:1.2em;height:1.2em}.prose :where(h1,h2,h3,h4,h5,h6):not(:where(.not-prose,.not-prose*)){color:var(--un-prose-headings);font-weight:600;line-height:1.25}.prose :where(a):not(:where(.not-prose,.not-prose*)){color:var(--un-prose-links);text-decoration:underline;font-weight:500}.prose :where(p,ul,ol,pre):not(:where(.not-prose,.not-prose*)){margin:1em 0;line-height:1.75}.prose :where(h2):not(:where(.not-prose,.not-prose*)){margin:1.75em 0 .5em;font-size:1.75em}.prose :where(h3):not(:where(.not-prose,.not-prose*)){margin:1.5em 0 .5em;font-size:1.375em}.prose :where(h4):not(:where(.not-prose,.not-prose*)){margin:1em 0;font-size:1.125em}.prose :where(code):not(:where(.not-prose,.not-prose*)){color:var(--un-prose-code);font-size:.875em;font-weight:600;font-family:var(--un-prose-font-mono)}.prose :where(:not(pre)>code):not(:where(.not-prose,.not-prose*)):after,.prose :where(:not(pre)>code):not(:where(.not-prose,.not-prose*)):before{content:"`"}.prose :where(pre):not(:where(.not-prose,.not-prose*)){padding:1.25rem 1.5rem;overflow-x:auto;border-radius:.375rem}.prose :where(pre,code):not(:where(.not-prose,.not-prose*)){white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;hyphens:none;background:0 0}.prose :where(precode):not(:where(.not-prose,.not-prose*)){font-weight:inherit}.prose :where(ol,ul):not(:where(.not-prose,.not-prose*)){padding-left:1.25em}.prose :where(ul):not(:where(.not-prose,.not-prose*)){list-style-type:disc}.prose :where(ul>li):not(:where(.not-prose,.not-prose*))::marker{color:var(--un-prose-lists)}.prose{color:var(--un-prose-body);max-width:65ch}.prose-lg,[prose-lg=""]{max-width:90ch}.hstack,[hstack=""]{display:flex;align-items:center}[nav-item=""]{display:flex;align-items:center;--un-text-opacity:1;color:rgba(31,41,55,var(--un-text-opacity));opacity:.85}[nav-item=""]>:not([hidden])~:not([hidden]){--un-space-x-reverse:0;margin-left:calc(.25rem * calc(1 - var(--un-space-x-reverse)));margin-right:calc(.25rem * var(--un-space-x-reverse))}.border-c{--un-border-opacity:1;border-color:rgba(229,231,235,var(--un-border-opacity))}.bg-c{--un-bg-opacity:1;background-color:rgba(255,255,255,var(--un-bg-opacity))}[nav-item=""]:hover{--un-text-opacity:1;color:rgba(0,0,0,var(--un-text-opacity))}.text-c{--un-text-opacity:1;color:rgba(31,41,55,var(--un-text-opacity))}.text-c-active{--un-text-opacity:1;color:rgba(23,114,208,var(--un-text-opacity))}[text~=c-lighter]{--un-text-opacity:1;color:rgba(31,41,55,var(--un-text-opacity));opacity:.5}[text~=c-light],[un-text~=c-light]{--un-text-opacity:1;color:rgba(31,41,55,var(--un-text-opacity));opacity:.85}@media (min-width:1024px){.prose-lg,[prose-lg=""]{font-size:1.125rem;line-height:1.75rem}}.absolute{position:absolute}.left-0{left:0}.top-0{top:0}.z-40{z-index:40}.grid{display:grid}.m-auto{margin:auto}[mx-auto=""]{margin-left:auto;margin-right:auto}.mb-6{margin-bottom:1.5rem}[mb-8=""]{margin-bottom:2rem}[mr-1=""]{margin-right:.25rem}[mt-16=""]{margin-top:4rem}.mt-2{margin-top:.5rem}[mt-20=""],[m~=t-20]{margin-top:5rem}[mt-6=""]{margin-top:1.5rem}.inline-block{display:inline-block}.h-14{height:3.5rem}[h-4\.5=""]{height:1.125rem}.min-h-full{min-height:100%}[w-4\.5=""]{width:1.125rem}.w-full{width:100%}.flex{display:flex}.flex-1{flex:1 1 0%}.flex-col{flex-direction:column}.justify-between{justify-content:space-between}[space-x-4=""]>:not([hidden])~:not([hidden]){--un-space-x-reverse:0;margin-left:calc(1rem * calc(1 - var(--un-space-x-reverse)));margin-right:calc(1rem * var(--un-space-x-reverse))}.border-t{border-top-width:1px}[p~=x-4]{padding-left:1rem;padding-right:1rem}.pb-3{padding-bottom:.75rem}.pt-3{padding-top:.75rem}[p~=b-6]{padding-bottom:1.5rem}[p~=t-24]{padding-top:6rem}[text~=center]{text-align:center}.text-left{text-align:left}.text-right{text-align:right}[align-text-top=""]{vertical-align:text-top}.font-sans{font-family:Computer Modern Sans,system-ui,-apple-system,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif}.font-ui,[font~=ui]{font-family:DM Sans}.text-\[0\.95em\]{font-size:.95em}.text-4xl{font-size:2.25rem;line-height:2.5rem}[text-sm=""],[text~=sm]{font-size:.875rem;line-height:1.25rem}[text~=lg]{font-size:1.125rem;line-height:1.75rem}.font-bold{font-weight:700}.leading-12{line-height:3rem}.hover\:underline:hover,[hover\:underline=""]:hover{text-decoration-line:underline}.opacity-50{opacity:.5}@media (max-width:767.9px){.lt-md\:hidden{display:none}}@media (min-width:768px){.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}[md\:hidden=""]{display:none}}body{counter-reset:katexEqnNo mmlEqnNo}.prose p{line-height:1.55}.prose ul{margin:0!important}.prose a{font-weight:400;--un-text-opacity:1;color:rgba(23,114,208,var(--un-text-opacity));text-decoration:none}.prose a:hover{text-decoration-line:underline}html:not(.dark) .prose .shiki-dark{display:none}.prose div[class*=language-]{position:relative;margin-top:.5rem;margin-bottom:.5rem;border-width:1px;--un-border-opacity:1;border-color:rgba(209,213,219,var(--un-border-opacity));border-radius:.375rem;padding-top:1.5rem}.prose div[class*=language-]:before{position:absolute;top:.875rem;left:1rem;width:.625rem;height:.625rem;border-radius:9999px;--un-bg-opacity:1;background-color:rgba(253,95,87,var(--un-bg-opacity));content:"";box-shadow:16px 0 #febb2f,32px 0 #2ec841}.prose div[class*=language-]>span.lang{position:absolute;top:.625rem;right:.75rem;font-size:.875rem;line-height:1.25rem;opacity:.6}.prose .shiki{margin:0;background-color:transparent!important;padding:1rem;font-size:.925em;line-height:1.5rem}.prose .shiki code{display:block;width:fit-content;min-width:100%}.prose .shiki code>span.highlighted{margin-left:-1rem;margin-right:-1rem;display:inline-block;padding-left:1rem;padding-right:1rem;width:calc(100% + 32px)}.prose .shiki-light code>span.highlighted{--un-bg-opacity:1;background-color:rgba(241,245,249,var(--un-bg-opacity))}.prose .shiki-dark code>span.highlighted{--un-bg-opacity:1;background-color:rgba(71,85,105,var(--un-bg-opacity))}.prose .custom-block{margin-top:1.5rem;margin-bottom:1.5rem;border-width:1px;border-radius:.375rem;padding:0 1rem}.prose .custom-block.warning{--un-border-opacity:1;border-color:rgba(217,119,6,var(--un-border-opacity))}.prose .custom-block.warning .custom-block-title{--un-text-opacity:1;color:rgba(217,119,6,var(--un-text-opacity))}.post a.header-anchor{float:left;margin-left:-1.3em;font-size:.75em;--un-text-opacity:1;color:rgba(31,41,55,var(--un-text-opacity));text-decoration:none;opacity:0}@media (max-width:639.9px){.post a.header-anchor{display:none}}.post h2:focus .header-anchor,.post h2:hover .header-anchor,.post h3:focus .header-anchor,.post h3:hover .header-anchor,.post h4:focus .header-anchor,.post h4:hover .header-anchor{opacity:.5}@font-face{font-family:Computer Modern Sans;font-style:normal;font-weight:400;src:url(/assets/regular-5b933bfd.woff) format("woff")}@font-face{font-family:Computer Modern Sans;font-style:normal;font-weight:700;src:url(/assets/bold-48de7558.woff) format("woff")}@font-face{font-family:Computer Modern Sans;font-style:italic;font-weight:400;src:url(/assets/italic-c0fd060e.woff) format("woff")}@font-face{font-family:Computer Modern Sans;font-style:italic;font-weight:700;src:url(/assets/bolditalic-28145ed6.woff) format("woff")}#app,body,html{margin:0;height:100%;padding:0}.prev a[data-v-9b596018]:before{content:"\2190  "}.next a[data-v-9b596018]:after{content:" \2192"}</style><link rel="preload" href="/assets/index-41285ec8.css" as="style"><link rel="modulepreload" crossorigin="" href="/assets/post-53bd5892.js"><link rel="preload" href="/assets/post-1d6a6dca.css" as="style"><link rel="modulepreload" crossorigin="" href="/assets/2020-10-07-my-blog-f3e0ebf3.js"><title>关于博客的碎碎念</title><meta name="description" content="A dragon lost in human world."><meta name="theme-color" content="#ffffff"><meta property="og:title" content="关于博客的碎碎念"><link rel="preload" as="font" crossorigin="anonymous" href="https://fonts.gstatic.com/s/dmsans/v11/rP2Hp2ywxg089UriCZ2IHSeH.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="https://fonts.gstatic.com/s/dmsans/v11/rP2Hp2ywxg089UriCZOIHQ.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="https://fonts.gstatic.com/s/dmsans/v11/rP2Cp2ywxg089UriASitCBamC2QX.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="https://fonts.gstatic.com/s/dmsans/v11/rP2Cp2ywxg089UriASitCBimCw.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_AMS-Regular-0cdd387c.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Caligraphic-Bold-de7701e4.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Caligraphic-Regular-5d53e70a.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Fraktur-Bold-74444efd.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Fraktur-Regular-51814d27.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Main-Bold-0f60d1b8.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Main-BoldItalic-99cd42a3.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Main-Italic-97479ca6.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Main-Regular-c2342cd8.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Math-BoldItalic-dc47344d.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Math-Italic-7af58c5e.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_SansSerif-Bold-e99ae511.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_SansSerif-Italic-00b26ac8.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_SansSerif-Regular-68e8c73e.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Script-Regular-036d4e95.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Size1-Regular-6b47c401.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Size2-Regular-d04c5421.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="data:font/woff2;base64,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"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Size4-Regular-a4af7d41.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Typewriter-Regular-71d517d6.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/regular-5b933bfd.woff"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/bold-48de7558.woff"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/italic-c0fd060e.woff"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/bolditalic-28145ed6.woff"></head><body class="font-sans"><div id="app" data-server-rendered="true"><main class="flex flex-col min-h-full text-c post" p="x-4 t-24 b-6" data-v-9b596018=""><header class="z-40 w-full h-14 hstack justify-between bg-c font-ui absolute top-0 left-0" p="x-4 md:x-5" data-v-4d808a77=""><a href="/" class="font-bold" un-text="c-light hover:c-dark" data-v-4d808a77=""><span text="lg" data-v-4d808a77="">hi@zxh</span><div i-fa6-solid:angle-right="" class="prompt inline-block" data-v-4d808a77=""></div><span class="blink" data-v-4d808a77="">_</span></a><nav hstack="" space-x-4="" data-v-4d808a77=""><a href="/projects" class="" nav-item="" title="Projects" data-v-4d808a77=""><div i-ph:rocket-launch-duotone="" md:hidden="" data-v-4d808a77=""></div><span class="lt-md:hidden" data-v-4d808a77="">Projects</span></a><a href="/posts" class="" nav-item="" title="Blog" data-v-4d808a77=""><div i-majesticons:pencil-line="" md:hidden="" data-v-4d808a77=""></div><span class="lt-md:hidden" data-v-4d808a77="">Blog</span></a><a nav-item="" href="/feed.xml" title="RSS" target="_blank" rel="noopener noreferrer" data-v-4d808a77=""><div i-jam:rss-feed="" data-v-4d808a77=""></div></a><button nav-item="" title="Toggle dark" data-v-4d808a77=""><div i="carbon-sun dark:carbon-moon" data-v-4d808a77=""></div></button><!--[--><!--]--></nav></header><div class="flex-1 mb-6"><!--[--><div prose-lg="" mx-auto="" mt-6="" mb-8="" data-v-9b596018=""><h1 class="text-4xl font-bold leading-12" data-v-9b596018="">关于博客的碎碎念</h1><p class="opacity-50 mt-2" data-v-9b596018="">Oct 7, 2020 · 10 min <span data-v-9b596018="">· <span i-uil:tag-alt="" mr-1="" text-sm="" data-v-9b596018=""></span><!--[--><span data-v-9b596018=""><a href="/posts/zh/tags/%E6%91%B8%E9%B1%BC" class="" hover:underline="" data-v-9b596018="">摸鱼</a><!----></span><!--]--></span></p></div><article class="toc-open" data-v-9b596018=""><div class="prose prose-lg m-auto text-left" data-v-9b596018=""><p>“虽然研究进度堪忧，但鱼还是要摸的”，在这样的理念的驱动下，菜鸡最终折腾出了一个目前看上去还算可以的方案。</p><p>我的博客最初 fork 自 <a href="https://github.com/Huxpro/huxpro.github.io" target="_blank" rel="noopener noreferrer">Huxpro/huxpro.github.io</a>，用了一段时间之后开始瞎改，把别人干净的代码改得乱七八糟。博客用的是 Jekyll 框架，而 Jekyll 就是 Github Pages 的默认引擎，所以在部署的时候 Github Pages 连 build 这一步都帮你省了。于是在很长一段时间内，作为一只懒惰的菜鸡，我并没有什么动力来折腾这些东西。而现在之所以要折腾，是因为不折腾的确不行了。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>不过这版博客已经是用 Vitesse 写的全新的版本了，所以这篇文章中的某些部分已经并不适用了…</p></div><h2 id="奇怪的起因" tabindex="-1">奇怪的起因 <a class="header-anchor" href="#奇怪的起因" aria-hidden="true">#</a></h2><p>说起来这还是一个漫长的故事。首先我的博客的公式渲染引擎用的是 <a href="https://katex.org/" target="_blank" rel="noopener noreferrer">Katex</a>，因为它快，比 Mathjax 快多了（可以参考<a href="https://katex.org/" target="_blank" rel="noopener noreferrer">这里</a>）。</p><p>kramdown 的默认数学公式渲染引擎是 Mathjax，而从 <code>v2.0.0</code> 开始 kramdown 似乎引入了一些插件来支持 Katex，比如 <a href="https://github.com/kramdown/math-katex" target="_blank" rel="noopener noreferrer">kramdown-math-katex</a>。那么问题来了，Github Pages 的 Jekyll 是不支持除了<a href="https://pages.github.com/versions/" target="_blank" rel="noopener noreferrer">这些插件</a>以外的插件的。那么唯一的办法就只有在本地 build 网站，然后把 build 好的文件 push 到 <code>gh-pages</code> 分支上去。</p><p>不行，这样多麻烦，Jekyll 的天生优势不就没了吗，不然我为啥不用 Hexo 或者 Hugo，它们还比 Jekyll 快，不行不行。</p><p>那个时候还没有 Github Actions 这种东西，我又完全不知道别的持续集成方案，就算知道了估计也不想去折腾。于是我在<a href="https://xuc.me/blog/katex-and-jekyll/" target="_blank" rel="noopener noreferrer">这里</a>看到了一个比较 hack 的方法，首先让 kramdown 以为我们要用 Mathjax：</p><div class="language-yaml"><span class="lang">yaml</span><pre class="shiki github-dark-dimmed has-highlighted-lines shiki-dark" tabindex="0"><code v-pre=""><span class="line"><span style="color:#8ddb8c">markdown</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">kramdown</span><span style="color:#adbac7">    </span></span>
<span class="line"><span style="color:#8ddb8c">kramdown</span><span style="color:#adbac7">:</span></span>
<span class="line highlighted"><span style="color:#adbac7">  </span><span style="color:#8ddb8c">math_engine</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">mathjax</span></span>
<span class="line"></span></code></pre><pre class="shiki github-light has-highlighted-lines shiki-light" tabindex="0"><code v-pre=""><span class="line"><span style="color:#22863a">markdown</span><span style="color:#24292e">: </span><span style="color:#032f62">kramdown</span><span style="color:#24292e">    </span></span>
<span class="line"><span style="color:#22863a">kramdown</span><span style="color:#24292e">:</span></span>
<span class="line highlighted"><span style="color:#24292e">  </span><span style="color:#22863a">math_engine</span><span style="color:#24292e">: </span><span style="color:#032f62">mathjax</span></span>
<span class="line"></span></code></pre></div><p>这样 kramdown 就会把像 <code>$a + b$</code> 这样的公式转换成 Mathjax 能识别的 HTML 形式：</p><div class="language-js"><span class="lang">js</span><pre class="shiki github-dark-dimmed shiki-dark" tabindex="0"><code v-pre=""><span class="line"><span style="color:#adbac7">&lt;</span><span style="color:#8ddb8c">script</span><span style="color:#adbac7"> </span><span style="color:#6cb6ff">type</span><span style="color:#f47067">=</span><span style="color:#96d0ff">"math/tex"</span><span style="color:#adbac7">&gt;a + b&lt;/</span><span style="color:#8ddb8c">script</span><span style="color:#adbac7">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki github-light shiki-light" tabindex="0"><code v-pre=""><span class="line"><span style="color:#24292e">&lt;</span><span style="color:#22863a">script</span><span style="color:#24292e"> </span><span style="color:#6f42c1">type</span><span style="color:#d73a49">=</span><span style="color:#032f62">"math/tex"</span><span style="color:#24292e">&gt;a + b&lt;/</span><span style="color:#22863a">script</span><span style="color:#24292e">&gt;</span></span>
<span class="line"></span></code></pre></div><p>然后通过 JavaScript 把 <code>&lt;script type="math/tex"&gt;</code> 标签里的东西用 Katex 渲染出来：</p><div class="language-js"><span class="lang">js</span><pre class="shiki github-dark-dimmed shiki-dark" tabindex="0"><code v-pre=""><span class="line"><span style="color:#dcbdfb">$</span><span style="color:#adbac7">(</span><span style="color:#96d0ff">"script[type='math/tex']"</span><span style="color:#adbac7">).</span><span style="color:#dcbdfb">replaceWith</span><span style="color:#adbac7">(</span><span style="color:#f47067">function</span><span style="color:#adbac7">() {</span></span>
<span class="line"><span style="color:#adbac7">  </span><span style="color:#f47067">var</span><span style="color:#adbac7"> tex </span><span style="color:#f47067">=</span><span style="color:#adbac7"> </span><span style="color:#dcbdfb">$</span><span style="color:#adbac7">(</span><span style="color:#6cb6ff">this</span><span style="color:#adbac7">).</span><span style="color:#dcbdfb">text</span><span style="color:#adbac7">();</span></span>
<span class="line"><span style="color:#adbac7">  </span><span style="color:#f47067">return</span><span style="color:#adbac7"> katex.</span><span style="color:#dcbdfb">renderToString</span><span style="color:#adbac7">(tex, {</span></span>
<span class="line"><span style="color:#adbac7">    displayMode: </span><span style="color:#6cb6ff">false</span></span>
<span class="line"><span style="color:#adbac7">  });</span></span>
<span class="line"><span style="color:#adbac7">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#dcbdfb">$</span><span style="color:#adbac7">(</span><span style="color:#96d0ff">"script[type='math/tex; mode=display']"</span><span style="color:#adbac7">).</span><span style="color:#dcbdfb">replaceWith</span><span style="color:#adbac7">(</span><span style="color:#f47067">function</span><span style="color:#adbac7">() {</span></span>
<span class="line"><span style="color:#adbac7">  </span><span style="color:#f47067">var</span><span style="color:#adbac7"> tex </span><span style="color:#f47067">=</span><span style="color:#adbac7"> </span><span style="color:#dcbdfb">$</span><span style="color:#adbac7">(</span><span style="color:#6cb6ff">this</span><span style="color:#adbac7">).</span><span style="color:#dcbdfb">html</span><span style="color:#adbac7">();</span></span>
<span class="line"><span style="color:#adbac7">  </span><span style="color:#f47067">return</span><span style="color:#adbac7"> katex.</span><span style="color:#dcbdfb">renderToString</span><span style="color:#adbac7">(tex.</span><span style="color:#dcbdfb">replace</span><span style="color:#adbac7">(</span><span style="color:#96d0ff">/%</span><span style="color:#6cb6ff">.</span><span style="color:#f47067">*</span><span style="color:#96d0ff">/</span><span style="color:#f47067">g</span><span style="color:#adbac7">, </span><span style="color:#96d0ff">''</span><span style="color:#adbac7">), {</span></span>
<span class="line"><span style="color:#adbac7">    displayMode: </span><span style="color:#6cb6ff">true</span></span>
<span class="line"><span style="color:#adbac7">  });</span></span>
<span class="line"><span style="color:#adbac7">});</span></span>
<span class="line"></span></code></pre><pre class="shiki github-light shiki-light" tabindex="0"><code v-pre=""><span class="line"><span style="color:#6f42c1">$</span><span style="color:#24292e">(</span><span style="color:#032f62">"script[type='math/tex']"</span><span style="color:#24292e">).</span><span style="color:#6f42c1">replaceWith</span><span style="color:#24292e">(</span><span style="color:#d73a49">function</span><span style="color:#24292e">() {</span></span>
<span class="line"><span style="color:#24292e">  </span><span style="color:#d73a49">var</span><span style="color:#24292e"> tex </span><span style="color:#d73a49">=</span><span style="color:#24292e"> </span><span style="color:#6f42c1">$</span><span style="color:#24292e">(</span><span style="color:#005cc5">this</span><span style="color:#24292e">).</span><span style="color:#6f42c1">text</span><span style="color:#24292e">();</span></span>
<span class="line"><span style="color:#24292e">  </span><span style="color:#d73a49">return</span><span style="color:#24292e"> katex.</span><span style="color:#6f42c1">renderToString</span><span style="color:#24292e">(tex, {</span></span>
<span class="line"><span style="color:#24292e">    displayMode: </span><span style="color:#005cc5">false</span></span>
<span class="line"><span style="color:#24292e">  });</span></span>
<span class="line"><span style="color:#24292e">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6f42c1">$</span><span style="color:#24292e">(</span><span style="color:#032f62">"script[type='math/tex; mode=display']"</span><span style="color:#24292e">).</span><span style="color:#6f42c1">replaceWith</span><span style="color:#24292e">(</span><span style="color:#d73a49">function</span><span style="color:#24292e">() {</span></span>
<span class="line"><span style="color:#24292e">  </span><span style="color:#d73a49">var</span><span style="color:#24292e"> tex </span><span style="color:#d73a49">=</span><span style="color:#24292e"> </span><span style="color:#6f42c1">$</span><span style="color:#24292e">(</span><span style="color:#005cc5">this</span><span style="color:#24292e">).</span><span style="color:#6f42c1">html</span><span style="color:#24292e">();</span></span>
<span class="line"><span style="color:#24292e">  </span><span style="color:#d73a49">return</span><span style="color:#24292e"> katex.</span><span style="color:#6f42c1">renderToString</span><span style="color:#24292e">(tex.</span><span style="color:#6f42c1">replace</span><span style="color:#24292e">(</span><span style="color:#032f62">/%</span><span style="color:#005cc5">.</span><span style="color:#d73a49">*</span><span style="color:#032f62">/</span><span style="color:#d73a49">g</span><span style="color:#24292e">, </span><span style="color:#032f62">''</span><span style="color:#24292e">), {</span></span>
<span class="line"><span style="color:#24292e">    displayMode: </span><span style="color:#005cc5">true</span></span>
<span class="line"><span style="color:#24292e">  });</span></span>
<span class="line"><span style="color:#24292e">});</span></span>
<span class="line"></span></code></pre></div><p>虽然看上去不太优雅，但好歹能用，本菜鸡的理念是能用就行，于是就这样过了一段时间。直到几个月前，我发现我博客的公式不对劲了，它们突然都变成了这样：<code>\(a + b\)</code>。</p><p>我一脸懵逼，第一反应是我是不是又把博客哪儿的代码搞崩了，但想了想我似乎也没有动过公式那部分的代码？而且当时我部署在 Coding Pages 上的博客公式还是正常的，那么大概率就是 Github Pages 哪里不对劲了。</p><p>搜了一下发现 Github Pages 把 kramdown 的版本更新到了 <code>v2.2.0</code>，从这一版开始，为了兼容 Mathjax <code>v3.x</code>，kramdown 会把 inline math 转换成 <code>\(a + b\)</code> 的形式，把 block math 转换成 <code>\[a + b\]</code> 的形式（参考<a href="https://github.com/gettalong/kramdown/commit/c3acf8df1db49d2456050f4456f3f542294e2e8f" target="_blank" rel="noopener noreferrer">这个 commit</a>），于是上面那段脚本就坏掉了。</p><p>于是一切都回到了最初的起点，摆在面前的办法只剩下把在本地用 kramdown <code>v2.1.0</code> build 好的网站扔 <code>gh-pages</code> 上去。这样干了几个月后懒惰的我实在忍不了了，并决定让 Github Actions 来帮我干这件事。</p><p>所以我当初为啥不选 Hexo…</p><h2 id="github-actions" tabindex="-1">Github Actions <a class="header-anchor" href="#github-actions" aria-hidden="true">#</a></h2><p>在 repo 下建一个目录 <code>.github/workflow</code>，在这个目录下放一个 <code>.yaml</code> 格式的 workflow 文件。GitHub 只要发现 <code>.github/workflows</code> 下有 <code>.yaml</code> 文件，就会自动运行它们。<a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions" target="_blank" rel="noopener noreferrer">这里</a>是 workflow 文件的详细文档。</p><h3 id="jekyll" tabindex="-1">Jekyll <a class="header-anchor" href="#jekyll" aria-hidden="true">#</a></h3><p><a href="https://jekyllrb.com/docs/continuous-integration/github-actions/" target="_blank" rel="noopener noreferrer">Jekyll 官方</a>已经给了一个现成的 <a href="https://github.com/helaili/jekyll-action" target="_blank" rel="noopener noreferrer">action</a>，直接引用它就好：</p><div class="language-yaml"><span class="lang">yaml</span><pre class="shiki github-dark-dimmed shiki-dark" tabindex="0"><code v-pre=""><span class="line"><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">build Jekyll site and deploy it to GitHub Pages</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390"># 检测 master 分支上的推送和 pr</span></span>
<span class="line"><span style="color:#6cb6ff">on</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">  </span><span style="color:#8ddb8c">push</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">    </span><span style="color:#8ddb8c">branches</span><span style="color:#adbac7">: [ </span><span style="color:#96d0ff">master</span><span style="color:#adbac7"> ]</span></span>
<span class="line"><span style="color:#adbac7">  </span><span style="color:#8ddb8c">pull_request</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">    </span><span style="color:#8ddb8c">branches</span><span style="color:#adbac7">: [ </span><span style="color:#96d0ff">master</span><span style="color:#adbac7"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8ddb8c">jobs</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">  </span><span style="color:#8ddb8c">jekyll-build-and-deploy</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">    </span><span style="color:#8ddb8c">runs-on</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">ubuntu-latest</span></span>
<span class="line"><span style="color:#adbac7">    </span><span style="color:#8ddb8c">steps</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">      - </span><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">checkout</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">uses</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">actions/checkout@v2</span></span>
<span class="line"><span style="color:#adbac7">      </span></span>
<span class="line"><span style="color:#adbac7">      </span><span style="color:#768390"># 检测 vendor/bundle 下有没有已经安装好的包</span></span>
<span class="line"><span style="color:#adbac7">      </span><span style="color:#768390"># 如果有的话就不用再 bundle install 了，节省时间和资源</span></span>
<span class="line"><span style="color:#adbac7">      - </span><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">check cache</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">uses</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">actions/cache@v1</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">with</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">path</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">vendor/bundle</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">key</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">runner.os−gems−{%raw%}{{ hashFiles('**/Gemfile.lock') }}{% endraw %}</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">restore-keys</span><span style="color:#adbac7">: </span><span style="color:#f47067">|</span></span>
<span class="line"><span style="color:#96d0ff">            ${{ runner.os }}-gems-</span></span>
<span class="line"><span style="color:#96d0ff">      </span></span>
<span class="line"><span style="color:#adbac7">      </span><span style="color:#768390"># 引用 helaili/jekyll-action 来打包 Jekyll 网站</span></span>
<span class="line"><span style="color:#adbac7">      </span><span style="color:#768390"># 并把打包好的文件推到同一个 repo 的 gh-pages 分支</span></span>
<span class="line"><span style="color:#adbac7">      - </span><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">build and deploy</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">uses</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">helaili/jekyll-action@2.0.4</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">env</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">JEKYLL_PAT</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">with</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">target_branch</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">'gh-pages'</span></span>
<span class="line"></span></code></pre><pre class="shiki github-light shiki-light" tabindex="0"><code v-pre=""><span class="line"><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">build Jekyll site and deploy it to GitHub Pages</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d"># 检测 master 分支上的推送和 pr</span></span>
<span class="line"><span style="color:#005cc5">on</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">  </span><span style="color:#22863a">push</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">    </span><span style="color:#22863a">branches</span><span style="color:#24292e">: [ </span><span style="color:#032f62">master</span><span style="color:#24292e"> ]</span></span>
<span class="line"><span style="color:#24292e">  </span><span style="color:#22863a">pull_request</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">    </span><span style="color:#22863a">branches</span><span style="color:#24292e">: [ </span><span style="color:#032f62">master</span><span style="color:#24292e"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863a">jobs</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">  </span><span style="color:#22863a">jekyll-build-and-deploy</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">    </span><span style="color:#22863a">runs-on</span><span style="color:#24292e">: </span><span style="color:#032f62">ubuntu-latest</span></span>
<span class="line"><span style="color:#24292e">    </span><span style="color:#22863a">steps</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">      - </span><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">checkout</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">uses</span><span style="color:#24292e">: </span><span style="color:#032f62">actions/checkout@v2</span></span>
<span class="line"><span style="color:#24292e">      </span></span>
<span class="line"><span style="color:#24292e">      </span><span style="color:#6a737d"># 检测 vendor/bundle 下有没有已经安装好的包</span></span>
<span class="line"><span style="color:#24292e">      </span><span style="color:#6a737d"># 如果有的话就不用再 bundle install 了，节省时间和资源</span></span>
<span class="line"><span style="color:#24292e">      - </span><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">check cache</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">uses</span><span style="color:#24292e">: </span><span style="color:#032f62">actions/cache@v1</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">with</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">path</span><span style="color:#24292e">: </span><span style="color:#032f62">vendor/bundle</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">key</span><span style="color:#24292e">: </span><span style="color:#032f62">runner.os−gems−{%raw%}{{ hashFiles('**/Gemfile.lock') }}{% endraw %}</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">restore-keys</span><span style="color:#24292e">: </span><span style="color:#d73a49">|</span></span>
<span class="line"><span style="color:#032f62">            ${{ runner.os }}-gems-</span></span>
<span class="line"><span style="color:#032f62">      </span></span>
<span class="line"><span style="color:#24292e">      </span><span style="color:#6a737d"># 引用 helaili/jekyll-action 来打包 Jekyll 网站</span></span>
<span class="line"><span style="color:#24292e">      </span><span style="color:#6a737d"># 并把打包好的文件推到同一个 repo 的 gh-pages 分支</span></span>
<span class="line"><span style="color:#24292e">      - </span><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">build and deploy</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">uses</span><span style="color:#24292e">: </span><span style="color:#032f62">helaili/jekyll-action@2.0.4</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">env</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">JEKYLL_PAT</span><span style="color:#24292e">: </span><span style="color:#032f62">${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">with</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">target_branch</span><span style="color:#24292e">: </span><span style="color:#032f62">'gh-pages'</span></span>
<span class="line"></span></code></pre></div><p>相当于这个 workflow 会自动检测 <code>master</code> 分支上的 push 和 pull_request，一旦检测就到准备环境，然后运行 <code>bundle exec jekyll build</code> 打包网站，并把打包产物扔 <code>gh-pages</code> 分支上去。</p><p>需要注意的是必须得有一个 <code>Gemfile</code> 和 <code>Gemfile.lock</code> 文件，<code>Gemfile</code> 里面写上要装的包，比如本博客的 <code>Gemfile</code> 长这样：</p><div class="language-ruby"><span class="lang">ruby</span><pre class="shiki github-dark-dimmed shiki-dark" tabindex="0"><code v-pre=""><span class="line"><span style="color:#adbac7">source </span><span style="color:#96d0ff">'https://rubygems.org'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adbac7">gem </span><span style="color:#96d0ff">'jekyll'</span><span style="color:#adbac7">, </span><span style="color:#96d0ff">'~&gt; 4.0'</span></span>
<span class="line"><span style="color:#adbac7">gem </span><span style="color:#96d0ff">'kramdown'</span><span style="color:#adbac7">, </span><span style="color:#96d0ff">'= 2.1.0'</span><span style="color:#adbac7">  </span><span style="color:#768390"># 这里为了 Katex 把 kramdown 版本固定在了 2.1.0</span></span>
<span class="line"><span style="color:#adbac7">gem </span><span style="color:#96d0ff">'jemoji'</span><span style="color:#adbac7">, </span><span style="color:#96d0ff">'~&gt; 0.11.1'</span></span>
<span class="line"><span style="color:#adbac7">gem </span><span style="color:#96d0ff">'jekyll-paginate'</span><span style="color:#adbac7">, </span><span style="color:#96d0ff">'~&gt; 1.1.0'</span></span>
<span class="line"></span></code></pre><pre class="shiki github-light shiki-light" tabindex="0"><code v-pre=""><span class="line"><span style="color:#24292e">source </span><span style="color:#032f62">'https://rubygems.org'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292e">gem </span><span style="color:#032f62">'jekyll'</span><span style="color:#24292e">, </span><span style="color:#032f62">'~&gt; 4.0'</span></span>
<span class="line"><span style="color:#24292e">gem </span><span style="color:#032f62">'kramdown'</span><span style="color:#24292e">, </span><span style="color:#032f62">'= 2.1.0'</span><span style="color:#24292e">  </span><span style="color:#6a737d"># 这里为了 Katex 把 kramdown 版本固定在了 2.1.0</span></span>
<span class="line"><span style="color:#24292e">gem </span><span style="color:#032f62">'jemoji'</span><span style="color:#24292e">, </span><span style="color:#032f62">'~&gt; 0.11.1'</span></span>
<span class="line"><span style="color:#24292e">gem </span><span style="color:#032f62">'jekyll-paginate'</span><span style="color:#24292e">, </span><span style="color:#032f62">'~&gt; 1.1.0'</span></span>
<span class="line"></span></code></pre></div><p>如果用了自定义域名，那就还需要在 <code>master</code> 分支放一个 <code>CNAME</code>，这样 <a href="https://github.com/helaili/jekyll-action" target="_blank" rel="noopener noreferrer">helaili/jekyll-action</a> 就会把 <code>CNAME</code> 也推到 <code>gh-pages</code> 分支去。直接在 <code>gh-pages</code> 分支加 <code>CNAME</code> 是没有什么用的，因为下次自动推送时它就会被清掉…</p><h3 id="node-js" tabindex="-1">Node.js <a class="header-anchor" href="#node-js" aria-hidden="true">#</a></h3><p>所有能用 Node.js 搞定的东西（比如这个基于 VuePress 的博客）都能用以下工作流处理：</p><h4 id="npm" tabindex="-1">npm <a class="header-anchor" href="#npm" aria-hidden="true">#</a></h4><div class="language-yaml"><span class="lang">yaml</span><pre class="shiki github-dark-dimmed shiki-dark" tabindex="0"><code v-pre=""><span class="line"><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">build and deploy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#768390"># 检测 master 分支上的推送和 pr</span></span>
<span class="line"><span style="color:#6cb6ff">on</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">  </span><span style="color:#8ddb8c">push</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">    </span><span style="color:#8ddb8c">branches</span><span style="color:#adbac7">: [ </span><span style="color:#96d0ff">master</span><span style="color:#adbac7"> ]</span></span>
<span class="line"><span style="color:#adbac7">  </span><span style="color:#8ddb8c">pull_request</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">    </span><span style="color:#8ddb8c">branches</span><span style="color:#adbac7">: [ </span><span style="color:#96d0ff">master</span><span style="color:#adbac7"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8ddb8c">jobs</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">  </span><span style="color:#8ddb8c">build-and-deploy-vuepress</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">    </span><span style="color:#8ddb8c">runs-on</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">ubuntu-latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adbac7">    </span><span style="color:#8ddb8c">steps</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">      - </span><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">Checkout</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">uses</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">actions/checkout@v2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adbac7">      </span><span style="color:#768390"># Node.js 环境</span></span>
<span class="line"><span style="color:#adbac7">      - </span><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">Setup Node</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">uses</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">actions/setup-node@v2.1.2</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">with</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">node-version</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">'12.x'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adbac7">      - </span><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">Cache dependencies</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">uses</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">actions/cache@v2</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">with</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">path</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">~/.npm</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">key</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">restore-keys</span><span style="color:#adbac7">: </span><span style="color:#f47067">|</span></span>
<span class="line"><span style="color:#96d0ff">            ${{ runner.os }}-node-</span></span>
<span class="line"><span style="color:#96d0ff">      </span></span>
<span class="line"><span style="color:#adbac7">      </span><span style="color:#768390"># npm run build</span></span>
<span class="line"><span style="color:#adbac7">      - </span><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">Build</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">run</span><span style="color:#adbac7">: </span><span style="color:#f47067">|</span></span>
<span class="line"><span style="color:#96d0ff">          npm ci</span></span>
<span class="line"><span style="color:#96d0ff">          npm run build</span></span>
<span class="line"><span style="color:#96d0ff">      </span></span>
<span class="line"><span style="color:#adbac7">      </span><span style="color:#768390"># 推送到同一个 repo 的 gh-pages 分支</span></span>
<span class="line"><span style="color:#adbac7">      - </span><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">Deploy</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">uses</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">peaceiris/actions-gh-pages@v3</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">with</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">github_token</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">publish_dir</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">dist</span><span style="color:#adbac7"> </span><span style="color:#768390"># build 输出文件夹</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">cname</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">zxh.io</span><span style="color:#adbac7">  </span><span style="color:#768390"># 如果用了自定义域名，在这里设置</span></span>
<span class="line"></span></code></pre><pre class="shiki github-light shiki-light" tabindex="0"><code v-pre=""><span class="line"><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">build and deploy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6a737d"># 检测 master 分支上的推送和 pr</span></span>
<span class="line"><span style="color:#005cc5">on</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">  </span><span style="color:#22863a">push</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">    </span><span style="color:#22863a">branches</span><span style="color:#24292e">: [ </span><span style="color:#032f62">master</span><span style="color:#24292e"> ]</span></span>
<span class="line"><span style="color:#24292e">  </span><span style="color:#22863a">pull_request</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">    </span><span style="color:#22863a">branches</span><span style="color:#24292e">: [ </span><span style="color:#032f62">master</span><span style="color:#24292e"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863a">jobs</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">  </span><span style="color:#22863a">build-and-deploy-vuepress</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">    </span><span style="color:#22863a">runs-on</span><span style="color:#24292e">: </span><span style="color:#032f62">ubuntu-latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292e">    </span><span style="color:#22863a">steps</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">      - </span><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">Checkout</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">uses</span><span style="color:#24292e">: </span><span style="color:#032f62">actions/checkout@v2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292e">      </span><span style="color:#6a737d"># Node.js 环境</span></span>
<span class="line"><span style="color:#24292e">      - </span><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">Setup Node</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">uses</span><span style="color:#24292e">: </span><span style="color:#032f62">actions/setup-node@v2.1.2</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">with</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">node-version</span><span style="color:#24292e">: </span><span style="color:#032f62">'12.x'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292e">      - </span><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">Cache dependencies</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">uses</span><span style="color:#24292e">: </span><span style="color:#032f62">actions/cache@v2</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">with</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">path</span><span style="color:#24292e">: </span><span style="color:#032f62">~/.npm</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">key</span><span style="color:#24292e">: </span><span style="color:#032f62">${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">restore-keys</span><span style="color:#24292e">: </span><span style="color:#d73a49">|</span></span>
<span class="line"><span style="color:#032f62">            ${{ runner.os }}-node-</span></span>
<span class="line"><span style="color:#032f62">      </span></span>
<span class="line"><span style="color:#24292e">      </span><span style="color:#6a737d"># npm run build</span></span>
<span class="line"><span style="color:#24292e">      - </span><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">Build</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">run</span><span style="color:#24292e">: </span><span style="color:#d73a49">|</span></span>
<span class="line"><span style="color:#032f62">          npm ci</span></span>
<span class="line"><span style="color:#032f62">          npm run build</span></span>
<span class="line"><span style="color:#032f62">      </span></span>
<span class="line"><span style="color:#24292e">      </span><span style="color:#6a737d"># 推送到同一个 repo 的 gh-pages 分支</span></span>
<span class="line"><span style="color:#24292e">      - </span><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">Deploy</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">uses</span><span style="color:#24292e">: </span><span style="color:#032f62">peaceiris/actions-gh-pages@v3</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">with</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">github_token</span><span style="color:#24292e">: </span><span style="color:#032f62">${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">publish_dir</span><span style="color:#24292e">: </span><span style="color:#032f62">dist</span><span style="color:#24292e"> </span><span style="color:#6a737d"># build 输出文件夹</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">cname</span><span style="color:#24292e">: </span><span style="color:#032f62">zxh.io</span><span style="color:#24292e">  </span><span style="color:#6a737d"># 如果用了自定义域名，在这里设置</span></span>
<span class="line"></span></code></pre></div><p>其中 <a href="https://github.com/peaceiris/actions-gh-pages" target="_blank" rel="noopener noreferrer">peaceiris/actions-gh-pages</a> 也是一个别人写好的 action，能把指定路径的文件推到 <code>gh-pages</code> 分支。</p><h4 id="yarn" tabindex="-1">yarn <a class="header-anchor" href="#yarn" aria-hidden="true">#</a></h4><p>如果包管理工具用的 <code>yarn</code>：</p><div class="language-yaml"><span class="lang">yaml</span><pre class="shiki github-dark-dimmed shiki-dark" tabindex="0"><code v-pre=""><span class="line"><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">build and deploy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6cb6ff">on</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">  </span><span style="color:#8ddb8c">push</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">    </span><span style="color:#8ddb8c">branches</span><span style="color:#adbac7">: [ </span><span style="color:#96d0ff">master</span><span style="color:#adbac7"> ]</span></span>
<span class="line"><span style="color:#adbac7">  </span><span style="color:#8ddb8c">pull_request</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">    </span><span style="color:#8ddb8c">branches</span><span style="color:#adbac7">: [ </span><span style="color:#96d0ff">master</span><span style="color:#adbac7"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8ddb8c">jobs</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">  </span><span style="color:#8ddb8c">build-and-deploy-vuepress</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">    </span><span style="color:#8ddb8c">runs-on</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">ubuntu-latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adbac7">    </span><span style="color:#8ddb8c">steps</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">      - </span><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">Checkout</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">uses</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">actions/checkout@v2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adbac7">      - </span><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">Setup Node</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">uses</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">actions/setup-node@v2.1.2</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">with</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">node-version</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">'12'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adbac7">      - </span><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">Get yarn cache</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">id</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">yarn-cache</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">run</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">echo "::set-output name=dir::$(yarn cache dir)"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adbac7">      - </span><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">Cache dependencies</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">uses</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">actions/cache@v2</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">with</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">path</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">${{ steps.yarn-cache.outputs.dir }}</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">key</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">restore-keys</span><span style="color:#adbac7">: </span><span style="color:#f47067">|</span></span>
<span class="line"><span style="color:#96d0ff">            ${{ runner.os }}-yarn-</span></span>
<span class="line"><span style="color:#96d0ff">      </span></span>
<span class="line"><span style="color:#adbac7">      - </span><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">Build</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">run</span><span style="color:#adbac7">: </span><span style="color:#f47067">|</span></span>
<span class="line"><span style="color:#96d0ff">          yarn install --frozen-lockfile</span></span>
<span class="line"><span style="color:#96d0ff">          yarn build</span></span>
<span class="line"><span style="color:#96d0ff">      </span></span>
<span class="line"><span style="color:#adbac7">      - </span><span style="color:#8ddb8c">name</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">Deploy</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">uses</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">peaceiris/actions-gh-pages@v3</span></span>
<span class="line"><span style="color:#adbac7">        </span><span style="color:#8ddb8c">with</span><span style="color:#adbac7">:</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">github_token</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">publish_dir</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">dist</span></span>
<span class="line"><span style="color:#adbac7">          </span><span style="color:#8ddb8c">cname</span><span style="color:#adbac7">: </span><span style="color:#96d0ff">zxh.io</span></span>
<span class="line"></span></code></pre><pre class="shiki github-light shiki-light" tabindex="0"><code v-pre=""><span class="line"><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">build and deploy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005cc5">on</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">  </span><span style="color:#22863a">push</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">    </span><span style="color:#22863a">branches</span><span style="color:#24292e">: [ </span><span style="color:#032f62">master</span><span style="color:#24292e"> ]</span></span>
<span class="line"><span style="color:#24292e">  </span><span style="color:#22863a">pull_request</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">    </span><span style="color:#22863a">branches</span><span style="color:#24292e">: [ </span><span style="color:#032f62">master</span><span style="color:#24292e"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863a">jobs</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">  </span><span style="color:#22863a">build-and-deploy-vuepress</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">    </span><span style="color:#22863a">runs-on</span><span style="color:#24292e">: </span><span style="color:#032f62">ubuntu-latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292e">    </span><span style="color:#22863a">steps</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">      - </span><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">Checkout</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">uses</span><span style="color:#24292e">: </span><span style="color:#032f62">actions/checkout@v2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292e">      - </span><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">Setup Node</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">uses</span><span style="color:#24292e">: </span><span style="color:#032f62">actions/setup-node@v2.1.2</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">with</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">node-version</span><span style="color:#24292e">: </span><span style="color:#032f62">'12'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292e">      - </span><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">Get yarn cache</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">id</span><span style="color:#24292e">: </span><span style="color:#032f62">yarn-cache</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">run</span><span style="color:#24292e">: </span><span style="color:#032f62">echo "::set-output name=dir::$(yarn cache dir)"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292e">      - </span><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">Cache dependencies</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">uses</span><span style="color:#24292e">: </span><span style="color:#032f62">actions/cache@v2</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">with</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">path</span><span style="color:#24292e">: </span><span style="color:#032f62">${{ steps.yarn-cache.outputs.dir }}</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">key</span><span style="color:#24292e">: </span><span style="color:#032f62">${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">restore-keys</span><span style="color:#24292e">: </span><span style="color:#d73a49">|</span></span>
<span class="line"><span style="color:#032f62">            ${{ runner.os }}-yarn-</span></span>
<span class="line"><span style="color:#032f62">      </span></span>
<span class="line"><span style="color:#24292e">      - </span><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">Build</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">run</span><span style="color:#24292e">: </span><span style="color:#d73a49">|</span></span>
<span class="line"><span style="color:#032f62">          yarn install --frozen-lockfile</span></span>
<span class="line"><span style="color:#032f62">          yarn build</span></span>
<span class="line"><span style="color:#032f62">      </span></span>
<span class="line"><span style="color:#24292e">      - </span><span style="color:#22863a">name</span><span style="color:#24292e">: </span><span style="color:#032f62">Deploy</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">uses</span><span style="color:#24292e">: </span><span style="color:#032f62">peaceiris/actions-gh-pages@v3</span></span>
<span class="line"><span style="color:#24292e">        </span><span style="color:#22863a">with</span><span style="color:#24292e">:</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">github_token</span><span style="color:#24292e">: </span><span style="color:#032f62">${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">publish_dir</span><span style="color:#24292e">: </span><span style="color:#032f62">dist</span></span>
<span class="line"><span style="color:#24292e">          </span><span style="color:#22863a">cname</span><span style="color:#24292e">: </span><span style="color:#032f62">zxh.io</span></span>
<span class="line"></span></code></pre></div><h2 id="优化" tabindex="-1">优化 <a class="header-anchor" href="#优化" aria-hidden="true">#</a></h2><h3 id="减少依赖" tabindex="-1">减少依赖 <a class="header-anchor" href="#减少依赖" aria-hidden="true">#</a></h3><p>通过砍掉一些觉得用不太上的功能，和直接手写一些比较简单的功能，去掉了一些依赖。但我已经忘了去掉了哪些了…</p><h3 id="合并依赖" tabindex="-1">合并依赖 <a class="header-anchor" href="#合并依赖" aria-hidden="true">#</a></h3><p>为了减少请求次数，可以尽量把多个 JS 或 CSS 文件合并压缩成一个。上 Gulp 之类的工具当然也可以，不过 jsDelivr 自带了合并功能，比如要合并以下两个库：</p><ul><li><a href="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js" target="_blank" rel="noopener noreferrer">https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js</a></li><li><a href="https://cdn.jsdelivr.net/npm/mermaid@8.4.8/dist/mermaid.min.js" target="_blank" rel="noopener noreferrer">https://cdn.jsdelivr.net/npm/mermaid@8.4.8/dist/mermaid.min.js</a></li></ul><p>只需要：</p><div class="language-"><span class="lang"></span><pre class="shiki github-dark-dimmed shiki-dark" tabindex="0"><code v-pre=""><span class="line"><span style="color:#adbac7">https://cdn.jsdelivr.net/combine/npm/chart.js@2.9.3/dist/Chart.min.js,npm/mermaid@8.4.8/dist/mermaid.min.js</span></span>
<span class="line"><span style="color:#adbac7"></span></span></code></pre><pre class="shiki github-light shiki-light" tabindex="0"><code v-pre=""><span class="line"><span style="color:#24292e">https://cdn.jsdelivr.net/combine/npm/chart.js@2.9.3/dist/Chart.min.js,npm/mermaid@8.4.8/dist/mermaid.min.js</span></span>
<span class="line"><span style="color:#24292e"></span></span></code></pre></div><p>于是我把除了 Katex 和 Mathjax（因为这俩涉及到引用字体的问题）以外的文件都合并成了一个 <code>lib.min.js</code>。</p><h3 id="cdn" tabindex="-1">CDN <a class="header-anchor" href="#cdn" aria-hidden="true">#</a></h3><p>又一次喜闻乐见的白嫖 jsDelivr，对于托管在 Github 上的博客来说，在静态资源路径前加上以下 URL 即可：</p><div class="language-"><span class="lang"></span><pre class="shiki github-dark-dimmed shiki-dark" tabindex="0"><code v-pre=""><span class="line"><span style="color:#adbac7">https://cdn.jsdelivr.net/gh/{{ 用户名 }}/{{ 仓库名 }}@{{ 分支名 }}</span></span>
<span class="line"><span style="color:#adbac7"></span></span></code></pre><pre class="shiki github-light shiki-light" tabindex="0"><code v-pre=""><span class="line"><span style="color:#24292e">https://cdn.jsdelivr.net/gh/{{ 用户名 }}/{{ 仓库名 }}@{{ 分支名 }}</span></span>
<span class="line"><span style="color:#24292e"></span></span></code></pre></div><p>比如：</p><div class="language-"><span class="lang"></span><pre class="shiki github-dark-dimmed shiki-dark" tabindex="0"><code v-pre=""><span class="line"><span style="color:#adbac7">https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@master/js/lib.min.js</span></span>
<span class="line"><span style="color:#adbac7"></span></span></code></pre><pre class="shiki github-light shiki-light" tabindex="0"><code v-pre=""><span class="line"><span style="color:#24292e">https://cdn.jsdelivr.net/gh/Renovamen/renovamen.github.io@master/js/lib.min.js</span></span>
<span class="line"><span style="color:#24292e"></span></span></code></pre></div><h2 id="vercel" tabindex="-1">Vercel <a class="header-anchor" href="#vercel" aria-hidden="true">#</a></h2><p>我一直以来都在听说双线部署甚至多线部署这种提高访问速度的操作，但一直没有去折腾。因为 Github Pages 虽然境内访问慢了点，但至少还是能访问的，那么能用就行了。直到几个月前，我发现 Github Pages 境内完全访问不上了…</p><p>间歇性抽风想想还是很让人不安，那行吧行吧双线部署我来了…</p><p>那时候我所知的有境内节点的静态网站托管服务就 <a href="https://gitee.com/help/articles/4136" target="_blank" rel="noopener noreferrer">Gitee Pages</a> 和 <a href="https://help.coding.net/docs/devops/cd/static-website.html" target="_blank" rel="noopener noreferrer">Coding Pages</a> 俩，而 Gitee Pages 不能免费自定义域名，于是就把境内的线路解析到了 Coding Pages 上。</p><p>然而不久之前，新版 Coding Pages 的静态网站合并到腾讯云静态网站，并开始收费了。之前旧版的静态网站还能正常部署和访问，但之后的网站就都得用新版。收费倒是并不贵且也没有什么问题，问题在于如果域名不备案的话，即使是境内的访问，Coding 也会强制给你上境外 CDN 加速，于是速度会很慢，估计比直接访问 Github Pages 还慢。</p><p>于是就手忙脚乱的把境内线路的博客扔到了 Vercel 上。只能说 Vercel 至少到目前为止还没发现什么毛病，有境内节点（不过感觉还是没有以前的 Coding Pages 快？），而且是直接自动从 Github 仓库上拉代码然后打包加部署，对菜鸡相当友好。</p><p>以前为啥就没发现呢。</p></div></article><div prose-lg="" mx-auto="" mt-16="" data-v-9b596018=""><div class="grid md:grid-cols-2 pb-3 text-[0.95em]" data-v-9b596018=""><a href="https://github.com/Renovamen/renovamen.github.io/edit/main/pages/posts/zh/2020-10-07-my-blog.md" title="Edit link" target="_blank" rel="noopener noreferrer" class="hover:underline text-c-active" data-v-9b596018=""><span i-tabler:edit="" w-4.5="" h-4.5="" align-text-top="" data-v-9b596018=""></span> Edit this page on GitHub</a><span text="md:right c-light" data-v-9b596018=""><span i-ic:round-update="" w-4.5="" h-4.5="" data-v-9b596018=""></span> Last updated: 1/31/2023, 4:06:13 PM</span></div><div class="grid md:grid-cols-2 pt-3 text-[0.95em] border-t border-c" data-v-9b596018=""><span class="prev" data-v-9b596018=""><a href="/posts/zh/2020-08-24-regularization-based-continual-learning" class="" hover:underline="" data-v-9b596018="">Regularization-based Continual Learning</a></span><span class="next text-right" data-v-9b596018=""><a href="/posts/zh/2021-01-01-new-year" class="" hover:underline="" data-v-9b596018="">2021 新年快乐</a></span></div><div class="giscus" mt-20="" data-v-9b596018=""></div></div><!--]--></div><footer font="ui" text="sm center c-lighter" m="t-20">© Xiaohan Zou 2023<br>A dragon lost in human world</footer></main></div><script>window.__INITIAL_STATE__='{"pinia":{}}'</script><link rel="stylesheet" href="/assets/index-41285ec8.css"><link rel="stylesheet" href="/assets/post-1d6a6dca.css"></body></html>